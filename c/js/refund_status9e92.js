function getRefundStatus(){var t=$("#form_refund_status").parsley().validate();if(t){$("#capcha").closest(".form-group").removeClass("has-error"),$("#capcha").closest(".form-group").find(".help-block").html("");var a=$("#form_refund_status").serialize(),e=$("#pan").val(),r=$("#ass_year").val();showLoader(),$.ajax({type:"POST",url:"/income-tax-refund-status/process",data:a,dataType:"json",success:function(t){if(hideLoader(),1==t.error_flag){var a=Math.floor(100*Math.random()+1);document.getElementById("captcha_img").src="/income-tax-refund-status/get_captcha&pan="+e+"&v="+a,$("#capcha").closest(".form-group").addClass("has-error"),$("#capcha").closest(".form-group").find(".help-block").html(t.message),$("#capcha").focus()}else if(""!=t.refund_status){var s="";if($("#ass_year").attr("disabled","true"),$("#email").attr("disabled","true"),$("#pan").attr("disabled","true"),$(".captcha").hide(),$(".btn-next").hide(),$("#refund-btn").hide(),$("#goback").show(),1==t.refund_flag)for(var o=t.refund_status.length,c=0;o>c;c++){var d="";d=1==t.multiple_status?0==c?"Revised Status:":"Earlier Status:":"Current Status:",s+='<tr><td colspan="2"><span>'+d+"</span><br />"+t.refund_status[c].status+"</td></tr>",s+="<tr><td>Date:</td><td>"+t.refund_status[c].date+"</td></tr>",s+="<tr><td>Payment Mode:</td><td>"+t.refund_status[c].mode_payment+"</td></tr>",s+="<tr><td>Reference No:</td><td>"+t.refund_status[c].reference_no+"</td></tr>"}else s+="<tr>",s+="<td>No refund record has been found at present. Either there is no refund or status is not updated by the Income-tax Department.</td><tr/>",s+="<tr><td>In case you have not filed the return for this year, you can file now with us.</td></tr>";$("#result_tbody").html(s),$("#span_pan").html(e),$("#span_year").html(r),$("#result").show(),$("#div_refund").hide()}else showNotification(toastrError,dataErrorMsg,toastrErrorClass)}})}}function goBack(){location.reload()}function emptyErrorBox(){$("#capcha").closest(".form-group").removeClass("has-error"),$("#capcha").closest(".form-group").find(".help-block").html("")}$(document).ready(function(){$(".btn-next").click(function(){$("#capcha").closest(".form-group").removeClass("has-error"),$("#capcha").closest(".form-group").find(".help-block").html("");var t=$("#form_refund_status").parsley().validate();if(t){var a=$("#capcha").val();showLoader(),$.ajax({type:"POST",url:"/income-tax-refund-status/capcha",data:{capcha:a},dataType:"json",success:function(t){hideLoader(),1!=t.error?($("#captcha_img").attr("src","/capcha/image.php?rand="+1e3*Math.random()),$("#capcha").val(""),$("#capcha").closest(".form-group").addClass("has-error"),$("#capcha").closest(".form-group").find(".help-block").html("Invalid captcha code.")):getRefundStatus()}})}})});